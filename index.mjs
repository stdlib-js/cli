// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.0.3-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-noop@v0.0.13-esm/index.mjs";function o(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}function i(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function s(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}var a="",l=!0,u="",p=!0,f=null;function c(e){return Math.floor(e)===e}var v=Object.prototype.hasOwnProperty,g=Array.isArray;function h(e,n){return"object"!=typeof n||null===n||g(n)?new TypeError(t("invalid argument. Options argument must be an object. Value: `%s`.",n)):v.call(n,"pkg")&&(e.pkg=n.pkg,"object"!=typeof e.pkg||null===e.pkg||g(e.pkg))?new TypeError(t("invalid option. `%s` option must be an object. Option: `%s`.","pkg",e.pkg)):v.call(n,"help")&&(e.help=n.help,"string"!=typeof e.help)?new TypeError(t("invalid option. `%s` option must be a string. Option: `%s`.","help",e.help)):v.call(n,"version")&&(e.version=n.version,"string"!=typeof e.version)?new TypeError(t("invalid option. `%s` option must be a string. Option: `%s`.","version",e.version)):v.call(n,"title")&&(e.title=n.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError(t("invalid option. `%s` option must be either a string or boolean primitive. Option: `%s`.","title",e.title)):v.call(n,"updates")&&(e.updates=n.updates,"boolean"!=typeof e.updates)?new TypeError(t("invalid option. `%s` option must be a boolean. Option: `%s`.","updates",e.updates)):v.call(n,"argv")&&(e.argv=n.argv,!g(e.argv))?new TypeError(t("invalid option. `%s` option must be an array. Option: `%s`.","argv",e.argv)):v.call(n,"options")&&(e.options=n.options,"object"!=typeof e.options||null===e.options||g(e.options))?new TypeError(t("invalid option. `%s` option must be a plain object. Option: `%s`.","options",e.options)):null}var d="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function m(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}var y=m,w=b;function k(e){if(y===setTimeout)return setTimeout(e,0);if((y===m||!y)&&setTimeout)return y=setTimeout,setTimeout(e,0);try{return y(e,0)}catch(t){try{return y.call(null,e,0)}catch(t){return y.call(this,e,0)}}}"function"==typeof d.setTimeout&&(y=setTimeout),"function"==typeof d.clearTimeout&&(w=clearTimeout);var j,T=[],E=!1,O=-1;function x(){E&&j&&(E=!1,j.length?T=j.concat(T):O=-1,T.length&&_())}function _(){if(!E){var e=k(x);E=!0;for(var t=T.length;t;){for(j=T,T=[];++O<t;)j&&j[O].run();O=-1,t=T.length}j=null,E=!1,function(e){if(w===clearTimeout)return clearTimeout(e);if((w===b||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(e);try{w(e)}catch(t){try{return w.call(null,e)}catch(t){return w.call(this,e)}}}(e)}}function A(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];T.push(new N(e,t)),1!==T.length||E||k(_)}function N(e,t){this.fun=e,this.array=t}N.prototype.run=function(){this.fun.apply(null,this.array)};var F={},L=[],$={},M={},B={};function P(){}var V=P,z=P,D=P,S=P,C=P,I=P,Z=P;function W(e){throw new Error("process.binding is not supported")}function q(){return"/"}function G(e){throw new Error("process.chdir is not supported")}function H(){return 0}var J=d.performance||{},K=J.now||J.mozNow||J.msNow||J.oNow||J.webkitNow||function(){return(new Date).getTime()};function Q(e){var t=.001*K.call(J),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var R=new Date;function U(){return(new Date-R)/1e3}var X={nextTick:A,title:"browser",browser:true,env:F,argv:L,version:"",versions:$,on:V,addListener:z,once:D,off:S,removeListener:C,removeAllListeners:I,emit:Z,binding:W,cwd:q,chdir:G,umask:H,hrtime:Q,platform:"browser",release:M,config:B,uptime:U},Y=o(Object.freeze({__proto__:null,addListener:z,argv:L,binding:W,browser:true,chdir:G,config:B,cwd:q,default:X,emit:Z,env:F,hrtime:Q,nextTick:A,off:S,on:V,once:D,platform:"browser",release:M,removeAllListeners:I,removeListener:C,title:"browser",umask:H,uptime:U,version:"",versions:$})),ee=console,te=Y.versions.node;function ne(e,t){var n;(n=te.split("."))[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),n[0]>0||n[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))}function re(){return this instanceof re?this:new re}n(re.prototype,"notify",r);var oe=function(e,t){t||(t={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(n.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?n.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){n.bools[e]=!0}));var r={};Object.keys(t.alias||{}).forEach((function(e){r[e]=[].concat(t.alias[e]),r[e].forEach((function(t){r[t]=[e].concat(r[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){n.strings[e]=!0,r[e]&&(n.strings[r[e]]=!0)}));var o=t.default||{},a={_:[]};Object.keys(n.bools).forEach((function(e){u(e,void 0!==o[e]&&o[e])}));var l=[];function u(e,t,o){if(!o||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||r[e]}(e,o)||!1!==n.unknownFn(o)){var s=!n.strings[e]&&i(t)?Number(t):t;p(a,e.split("."),s),(r[e]||[]).forEach((function(e){p(a,e.split("."),s)}))}}function p(e,t,r){for(var o=e,i=0;i<t.length-1;i++){if(s(o,a=t[i]))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var a;s(o,a=t[t.length-1])||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[a]||n.bools[a]||"boolean"==typeof o[a]?o[a]=r:Array.isArray(o[a])?o[a].push(r):o[a]=[o[a],r])}function f(e){return r[e].some((function(e){return n.bools[e]}))}-1!==e.indexOf("--")&&(l=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var c=0;c<e.length;c++){var v=e[c];if(/^--.+=/.test(v)){var g=v.match(/^--([^=]+)=([\s\S]*)$/),h=g[1],d=g[2];n.bools[h]&&(d="false"!==d),u(h,d,v)}else if(/^--no-.+/.test(v)){u(h=v.match(/^--no-(.+)/)[1],!1,v)}else if(/^--.+/.test(v)){h=v.match(/^--(.+)/)[1];void 0===(w=e[c+1])||/^-/.test(w)||n.bools[h]||n.allBools||r[h]&&f(h)?/^(true|false)$/.test(w)?(u(h,"true"===w,v),c++):u(h,!n.strings[h]||"",v):(u(h,w,v),c++)}else if(/^-[^-]+/.test(v)){for(var m=v.slice(1,-1).split(""),b=!1,y=0;y<m.length;y++){var w;if("-"!==(w=v.slice(y+2))){if(/[A-Za-z]/.test(m[y])&&/=/.test(w)){u(m[y],w.split("=")[1],v),b=!0;break}if(/[A-Za-z]/.test(m[y])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(w)){u(m[y],w,v),b=!0;break}if(m[y+1]&&m[y+1].match(/\W/)){u(m[y],v.slice(y+2),v),b=!0;break}u(m[y],!n.strings[m[y]]||"",v)}else u(m[y],w,v)}h=v.slice(-1)[0];b||"-"===h||(!e[c+1]||/^(-|--)[^-]/.test(e[c+1])||n.bools[h]||r[h]&&f(h)?e[c+1]&&/^(true|false)$/.test(e[c+1])?(u(h,"true"===e[c+1],v),c++):u(h,!n.strings[h]||"",v):(u(h,e[c+1],v),c++))}else if(n.unknownFn&&!1===n.unknownFn(v)||a._.push(n.strings._||!i(v)?v:Number(v)),t.stopEarly){a._.push.apply(a._,e.slice(c+1));break}}return Object.keys(o).forEach((function(e){var t,n,i;t=a,n=e.split("."),i=t,n.slice(0,-1).forEach((function(e){i=i[e]||{}})),n[n.length-1]in i||(p(a,e.split("."),o[e]),(r[e]||[]).forEach((function(t){p(a,t.split("."),o[e])})))})),t["--"]?(a["--"]=new Array,l.forEach((function(e){a["--"].push(e)}))):l.forEach((function(e){a._.push(e)})),a},ie=Object.defineProperty,se=Object.keys;function ae(e,t,n){ie(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function le(e){var t,n,r,o,i,s,c;if(!(this instanceof le))return arguments.length?new le(e):new le;if(r={pkg:{},help:a,title:l,version:u,updates:p,argv:f,options:{}},arguments.length&&(c=h(r,e)))throw c;return s=this,Y.stdout.on("error",Y.exit),Y.stderr.on("error",Y.exit),ae(this,"args",v),ae(this,"flags",g),ae(this,"help",d),ae(this,"version",m),!0===r.title&&r.pkg?"object"==typeof r.pkg.bin&&null!==r.pkg.bin?(n=se(r.pkg.bin),Y.title=n[0]):r.pkg.name&&(Y.title=r.pkg.name):r.title&&(Y.title=r.title),r.updates&&r.pkg&&r.pkg.name&&r.pkg.version&&(r.pkg,re().notify()),!r.version&&r.pkg&&r.pkg.version&&(r.version=r.pkg.version),r.argv?r.argv=r.argv.slice(2):r.argv=Y.argv.slice(2),o=oe(r.argv,r.options),i=o._,delete o._,(t=o).help?this.help(0):t.version?this.version():this;function v(){return i.slice()}function g(){var e,n,r,o;for(e=se(t),n={},o=0;o<e.length;o++)n[r=e[o]]=t[r];return n}function d(e){ee.error(r.help),s.close(e||0)}function m(){ee.error(r.version),s.close()}}ae(le.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!c(e)||e<0)throw new TypeError(t("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));ne(Y,e)}else ne(Y,0)})),ae(le.prototype,"error",(function(e,n){var r;if(!(e instanceof Error))throw new TypeError(t("invalid argument. First argument must be an error object. Value: `%s`.",e));if(arguments.length>1){if("number"!=typeof n||!c(n)||n<0)throw new TypeError(t("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",n));r=n}else r=1;ee.error("Error: %s",e.message),ne(Y,r)})),ae(le.prototype,"exit",(function(e){if(0===arguments.length)return Y.exit(0);if("number"!=typeof e||!c(e)||e<0)throw new TypeError(t("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));Y.exit(e)}));var ue={};e(ue,"CLI",le);export{le as CLI,ue as default};
//# sourceMappingURL=index.mjs.map
