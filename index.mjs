// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-noop@esm/index.mjs";function o(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}function i(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function s(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}var a={pkg:{},help:"",title:!0,version:"",updates:!0,argv:null,options:{}};var l=function(e){return Math.floor(e)===e},u=t,p=Object.prototype.hasOwnProperty,f=Array.isArray;var c=function(e,t){return"object"!=typeof t||null===t||f(t)?new TypeError(u("invalid argument. Options argument must be an object. Value: `%s`.",t)):p.call(t,"pkg")&&(e.pkg=t.pkg,"object"!=typeof e.pkg||null===e.pkg||f(e.pkg))?new TypeError(u("invalid option. `%s` option must be an object. Option: `%s`.","pkg",e.pkg)):p.call(t,"help")&&(e.help=t.help,"string"!=typeof e.help)?new TypeError(u("invalid option. `%s` option must be a string. Option: `%s`.","help",e.help)):p.call(t,"version")&&(e.version=t.version,"string"!=typeof e.version)?new TypeError(u("invalid option. `%s` option must be a string. Option: `%s`.","version",e.version)):p.call(t,"title")&&(e.title=t.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError(u("invalid option. `%s` option must be either a string or boolean primitive. Option: `%s`.","title",e.title)):p.call(t,"updates")&&(e.updates=t.updates,"boolean"!=typeof e.updates)?new TypeError(u("invalid option. `%s` option must be a boolean. Option: `%s`.","updates",e.updates)):p.call(t,"argv")&&(e.argv=t.argv,!f(e.argv))?new TypeError(u("invalid option. `%s` option must be an array. Option: `%s`.","argv",e.argv)):p.call(t,"options")&&(e.options=t.options,"object"!=typeof e.options||null===e.options||f(e.options))?new TypeError(u("invalid option. `%s` option must be a plain object. Option: `%s`.","options",e.options)):null},v="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function g(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}var d=g,m=h;function b(e){if(d===setTimeout)return setTimeout(e,0);if((d===g||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}"function"==typeof v.setTimeout&&(d=setTimeout),"function"==typeof v.clearTimeout&&(m=clearTimeout);var y,w=[],k=!1,j=-1;function T(){k&&y&&(k=!1,y.length?w=y.concat(w):j=-1,w.length&&E())}function E(){if(!k){var e=b(T);k=!0;for(var t=w.length;t;){for(y=w,w=[];++j<t;)y&&y[j].run();j=-1,t=w.length}y=null,k=!1,function(e){if(m===clearTimeout)return clearTimeout(e);if((m===h||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{m(e)}catch(t){try{return m.call(null,e)}catch(t){return m.call(this,e)}}}(e)}}function O(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];w.push(new x(e,t)),1!==w.length||k||b(E)}function x(e,t){this.fun=e,this.array=t}x.prototype.run=function(){this.fun.apply(null,this.array)};var _={},A=[],L={},N={},F={};function $(){}var M=$,B=$,P=$,V=$,z=$,C=$,D=$;function I(e){throw new Error("process.binding is not supported")}function S(){return"/"}function Z(e){throw new Error("process.chdir is not supported")}function W(){return 0}var q=v.performance||{},G=q.now||q.mozNow||q.msNow||q.oNow||q.webkitNow||function(){return(new Date).getTime()};function H(e){var t=.001*G.call(q),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var J=new Date;function K(){return(new Date-J)/1e3}var Q={nextTick:O,title:"browser",browser:true,env:_,argv:A,version:"",versions:L,on:M,addListener:B,once:P,off:V,removeListener:z,removeAllListeners:C,emit:D,binding:I,cwd:S,chdir:Z,umask:W,hrtime:H,platform:"browser",release:N,config:F,uptime:K},R=o(Object.freeze({__proto__:null,addListener:B,argv:A,binding:I,browser:true,chdir:Z,config:F,cwd:S,default:Q,emit:D,env:_,hrtime:H,nextTick:O,off:V,on:M,once:P,platform:"browser",release:N,removeAllListeners:C,removeListener:z,title:"browser",umask:W,uptime:K,version:"",versions:L})),U=console,X=R.versions.node;var Y=function(e,t){var n;(n=X.split("."))[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),n[0]>0||n[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))},ee=r;function te(){return this instanceof te?this:new te}n(te.prototype,"notify",ee);var ne=function(e,t){t||(t={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(n.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?n.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){n.bools[e]=!0}));var r={};Object.keys(t.alias||{}).forEach((function(e){r[e]=[].concat(t.alias[e]),r[e].forEach((function(t){r[t]=[e].concat(r[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){n.strings[e]=!0,r[e]&&(n.strings[r[e]]=!0)}));var o=t.default||{},a={_:[]};Object.keys(n.bools).forEach((function(e){u(e,void 0!==o[e]&&o[e])}));var l=[];function u(e,t,o){if(!o||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||r[e]}(e,o)||!1!==n.unknownFn(o)){var s=!n.strings[e]&&i(t)?Number(t):t;p(a,e.split("."),s),(r[e]||[]).forEach((function(e){p(a,e.split("."),s)}))}}function p(e,t,r){for(var o=e,i=0;i<t.length-1;i++){if(s(o,a=t[i]))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var a;s(o,a=t[t.length-1])||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[a]||n.bools[a]||"boolean"==typeof o[a]?o[a]=r:Array.isArray(o[a])?o[a].push(r):o[a]=[o[a],r])}function f(e){return r[e].some((function(e){return n.bools[e]}))}-1!==e.indexOf("--")&&(l=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var c=0;c<e.length;c++){var v=e[c];if(/^--.+=/.test(v)){var g=v.match(/^--([^=]+)=([\s\S]*)$/),h=g[1],d=g[2];n.bools[h]&&(d="false"!==d),u(h,d,v)}else if(/^--no-.+/.test(v)){u(h=v.match(/^--no-(.+)/)[1],!1,v)}else if(/^--.+/.test(v)){h=v.match(/^--(.+)/)[1];void 0===(w=e[c+1])||/^-/.test(w)||n.bools[h]||n.allBools||r[h]&&f(h)?/^(true|false)$/.test(w)?(u(h,"true"===w,v),c++):u(h,!n.strings[h]||"",v):(u(h,w,v),c++)}else if(/^-[^-]+/.test(v)){for(var m=v.slice(1,-1).split(""),b=!1,y=0;y<m.length;y++){var w;if("-"!==(w=v.slice(y+2))){if(/[A-Za-z]/.test(m[y])&&/=/.test(w)){u(m[y],w.split("=")[1],v),b=!0;break}if(/[A-Za-z]/.test(m[y])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(w)){u(m[y],w,v),b=!0;break}if(m[y+1]&&m[y+1].match(/\W/)){u(m[y],v.slice(y+2),v),b=!0;break}u(m[y],!n.strings[m[y]]||"",v)}else u(m[y],w,v)}h=v.slice(-1)[0];b||"-"===h||(!e[c+1]||/^(-|--)[^-]/.test(e[c+1])||n.bools[h]||r[h]&&f(h)?e[c+1]&&/^(true|false)$/.test(e[c+1])?(u(h,"true"===e[c+1],v),c++):u(h,!n.strings[h]||"",v):(u(h,e[c+1],v),c++))}else if(n.unknownFn&&!1===n.unknownFn(v)||a._.push(n.strings._||!i(v)?v:Number(v)),t.stopEarly){a._.push.apply(a._,e.slice(c+1));break}}return Object.keys(o).forEach((function(e){var t,n,i;t=a,n=e.split("."),i=t,n.slice(0,-1).forEach((function(e){i=i[e]||{}})),n[n.length-1]in i||(p(a,e.split("."),o[e]),(r[e]||[]).forEach((function(t){p(a,t.split("."),o[e])})))})),t["--"]?(a["--"]=new Array,l.forEach((function(e){a["--"].push(e)}))):l.forEach((function(e){a._.push(e)})),a},re=t,oe=a,ie=l,se=c,ae=R,le=U,ue=Y,pe=te,fe=Object.defineProperty,ce=Object.keys;function ve(e,t,n){fe(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function ge(e){var t,n,r,o,i,s,a;if(!(this instanceof ge))return arguments.length?new ge(e):new ge;if(r={pkg:{},help:oe.help,title:oe.title,version:oe.version,updates:oe.updates,argv:oe.argv,options:{}},arguments.length&&(a=se(r,e)))throw a;return s=this,ae.stdout.on("error",ae.exit),ae.stderr.on("error",ae.exit),ve(this,"args",l),ve(this,"flags",u),ve(this,"help",p),ve(this,"version",f),!0===r.title&&r.pkg?"object"==typeof r.pkg.bin&&null!==r.pkg.bin?(n=ce(r.pkg.bin),ae.title=n[0]):r.pkg.name&&(ae.title=r.pkg.name):r.title&&(ae.title=r.title),r.updates&&r.pkg&&r.pkg.name&&r.pkg.version&&(r.pkg,pe().notify()),!r.version&&r.pkg&&r.pkg.version&&(r.version=r.pkg.version),r.argv?r.argv=r.argv.slice(2):r.argv=ae.argv.slice(2),o=ne(r.argv,r.options),i=o._,delete o._,(t=o).help?this.help(0):t.version?this.version():this;function l(){return i.slice()}function u(){var e,n,r,o;for(e=ce(t),n={},o=0;o<e.length;o++)n[r=e[o]]=t[r];return n}function p(e){le.error(r.help),s.close(e||0)}function f(){le.error(r.version),s.close()}}ve(ge.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!ie(e)||e<0)throw new TypeError(re("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));ue(ae,e)}else ue(ae,0)})),ve(ge.prototype,"error",(function(e,t){var n;if(!(e instanceof Error))throw new TypeError(re("invalid argument. First argument must be an error object. Value: `%s`.",e));if(arguments.length>1){if("number"!=typeof t||!ie(t)||t<0)throw new TypeError(re("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",t));n=t}else n=1;le.error("Error: %s",e.message),ue(ae,n)})),ve(ge.prototype,"exit",(function(e){if(0===arguments.length)return ae.exit(0);if("number"!=typeof e||!ie(e)||e<0)throw new TypeError(re("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));ae.exit(e)}));var he=ge,de={};e(de,"CLI",he);export{he as CLI,de as default};
//# sourceMappingURL=index.mjs.map
