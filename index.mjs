// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@v0.1.1-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.1.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-noop@v0.1.1-esm/index.mjs";function o(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];n.push.apply(n,arguments);var r=Function.bind.apply(t,n);return new r}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}function i(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function s(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}var a="",l=!0,u="",p=!0,f=null;function c(e){return Math.floor(e)===e}var v=Object.prototype.hasOwnProperty,g=Array.isArray;function h(e,n){return"object"!=typeof n||null===n||g(n)?new TypeError(t("invalid argument. Options argument must be an object. Value: `%s`.",n)):v.call(n,"pkg")&&(e.pkg=n.pkg,"object"!=typeof e.pkg||null===e.pkg||g(e.pkg))?new TypeError(t("invalid option. `%s` option must be an object. Option: `%s`.","pkg",e.pkg)):v.call(n,"help")&&(e.help=n.help,"string"!=typeof e.help)?new TypeError(t("invalid option. `%s` option must be a string. Option: `%s`.","help",e.help)):v.call(n,"version")&&(e.version=n.version,"string"!=typeof e.version)?new TypeError(t("invalid option. `%s` option must be a string. Option: `%s`.","version",e.version)):v.call(n,"title")&&(e.title=n.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError(t("invalid option. `%s` option must be either a string or boolean primitive. Option: `%s`.","title",e.title)):v.call(n,"updates")&&(e.updates=n.updates,"boolean"!=typeof e.updates)?new TypeError(t("invalid option. `%s` option must be a boolean. Option: `%s`.","updates",e.updates)):v.call(n,"argv")&&(e.argv=n.argv,!g(e.argv))?new TypeError(t("invalid option. `%s` option must be an array. Option: `%s`.","argv",e.argv)):v.call(n,"options")&&(e.options=n.options,"object"!=typeof e.options||null===e.options||g(e.options))?new TypeError(t("invalid option. `%s` option must be a plain object. Option: `%s`.","options",e.options)):null}var d="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function m(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}var y=m,w=b;function k(e){if(y===setTimeout)return setTimeout(e,0);if((y===m||!y)&&setTimeout)return y=setTimeout,setTimeout(e,0);try{return y(e,0)}catch(t){try{return y.call(null,e,0)}catch(t){return y.call(this,e,0)}}}"function"==typeof d.setTimeout&&(y=setTimeout),"function"==typeof d.clearTimeout&&(w=clearTimeout);var j,T=[],E=!1,O=-1;function _(){E&&j&&(E=!1,j.length?T=j.concat(T):O=-1,T.length&&x())}function x(){if(!E){var e=k(_);E=!0;for(var t=T.length;t;){for(j=T,T=[];++O<t;)j&&j[O].run();O=-1,t=T.length}j=null,E=!1,function(e){if(w===clearTimeout)return clearTimeout(e);if((w===b||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(e);try{w(e)}catch(t){try{return w.call(null,e)}catch(t){return w.call(this,e)}}}(e)}}function A(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];T.push(new F(e,t)),1!==T.length||E||k(x)}function F(e,t){this.fun=e,this.array=t}F.prototype.run=function(){this.fun.apply(null,this.array)};var N={},L=[],M={},$={},B={};function P(){}var V=P,z=P,D=P,S=P,C=P,I=P,Z=P;function W(e){throw new Error("process.binding is not supported")}function q(){return"/"}function G(e){throw new Error("process.chdir is not supported")}function H(){return 0}var J=d.performance||{},K=J.now||J.mozNow||J.msNow||J.oNow||J.webkitNow||function(){return(new Date).getTime()};function Q(e){var t=.001*K.call(J),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var R=new Date;function U(){return(new Date-R)/1e3}var X={nextTick:A,title:"browser",browser:true,env:N,argv:L,version:"",versions:M,on:V,addListener:z,once:D,off:S,removeListener:C,removeAllListeners:I,emit:Z,binding:W,cwd:q,chdir:G,umask:H,hrtime:Q,platform:"browser",release:$,config:B,uptime:U},Y=o(Object.freeze({__proto__:null,addListener:z,argv:L,binding:W,browser:true,chdir:G,config:B,cwd:q,default:X,emit:Z,env:N,hrtime:Q,nextTick:A,off:S,on:V,once:D,platform:"browser",release:$,removeAllListeners:I,removeListener:C,title:"browser",umask:H,uptime:U,version:"",versions:M})),ee=console,te=Y.versions.node;function ne(e,t){var n;(n=te.split("."))[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),n[0]>0||n[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))}function re(){return this instanceof re?this:new re}n(re.prototype,"notify",r);var oe=function(e,t){t||(t={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(n.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?n.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){n.bools[e]=!0}));var r={};function o(e){return r[e].some((function(e){return n.bools[e]}))}Object.keys(t.alias||{}).forEach((function(e){r[e]=[].concat(t.alias[e]),r[e].forEach((function(t){r[t]=[e].concat(r[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){n.strings[e]=!0,r[e]&&[].concat(r[e]).forEach((function(e){n.strings[e]=!0}))}));var a=t.default||{},l={_:[]};function u(e,t,r){for(var o=e,i=0;i<t.length-1;i++){var a=t[i];if(s(o,a))return;void 0===o[a]&&(o[a]={}),o[a]!==Object.prototype&&o[a]!==Number.prototype&&o[a]!==String.prototype||(o[a]={}),o[a]===Array.prototype&&(o[a]=[]),o=o[a]}var l=t[t.length-1];s(o,l)||(o!==Object.prototype&&o!==Number.prototype&&o!==String.prototype||(o={}),o===Array.prototype&&(o=[]),void 0===o[l]||n.bools[l]||"boolean"==typeof o[l]?o[l]=r:Array.isArray(o[l])?o[l].push(r):o[l]=[o[l],r])}function p(e,t,o){if(!o||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||r[e]}(e,o)||!1!==n.unknownFn(o)){var s=!n.strings[e]&&i(t)?Number(t):t;u(l,e.split("."),s),(r[e]||[]).forEach((function(e){u(l,e.split("."),s)}))}}Object.keys(n.bools).forEach((function(e){p(e,void 0!==a[e]&&a[e])}));var f=[];-1!==e.indexOf("--")&&(f=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var c=0;c<e.length;c++){var v,g,h=e[c];if(/^--.+=/.test(h)){var d=h.match(/^--([^=]+)=([\s\S]*)$/);v=d[1];var m=d[2];n.bools[v]&&(m="false"!==m),p(v,m,h)}else if(/^--no-.+/.test(h))p(v=h.match(/^--no-(.+)/)[1],!1,h);else if(/^--.+/.test(h))v=h.match(/^--(.+)/)[1],void 0===(g=e[c+1])||/^(-|--)[^-]/.test(g)||n.bools[v]||n.allBools||r[v]&&o(v)?/^(true|false)$/.test(g)?(p(v,"true"===g,h),c+=1):p(v,!n.strings[v]||"",h):(p(v,g,h),c+=1);else if(/^-[^-]+/.test(h)){for(var b=h.slice(1,-1).split(""),y=!1,w=0;w<b.length;w++)if("-"!==(g=h.slice(w+2))){if(/[A-Za-z]/.test(b[w])&&"="===g[0]){p(b[w],g.slice(1),h),y=!0;break}if(/[A-Za-z]/.test(b[w])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(g)){p(b[w],g,h),y=!0;break}if(b[w+1]&&b[w+1].match(/\W/)){p(b[w],h.slice(w+2),h),y=!0;break}p(b[w],!n.strings[b[w]]||"",h)}else p(b[w],g,h);v=h.slice(-1)[0],y||"-"===v||(!e[c+1]||/^(-|--)[^-]/.test(e[c+1])||n.bools[v]||r[v]&&o(v)?e[c+1]&&/^(true|false)$/.test(e[c+1])?(p(v,"true"===e[c+1],h),c+=1):p(v,!n.strings[v]||"",h):(p(v,e[c+1],h),c+=1))}else if(n.unknownFn&&!1===n.unknownFn(h)||l._.push(n.strings._||!i(h)?h:Number(h)),t.stopEarly){l._.push.apply(l._,e.slice(c+1));break}}return Object.keys(a).forEach((function(e){var t,n,o;t=l,n=e.split("."),o=t,n.slice(0,-1).forEach((function(e){o=o[e]||{}})),n[n.length-1]in o||(u(l,e.split("."),a[e]),(r[e]||[]).forEach((function(t){u(l,t.split("."),a[e])})))})),t["--"]?l["--"]=f.slice():f.forEach((function(e){l._.push(e)})),l},ie=Object.defineProperty,se=Object.keys;function ae(e,t,n){ie(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function le(e){var t,n,r,o,i,s,c;if(!(this instanceof le))return arguments.length?new le(e):new le;if(r={pkg:{},help:a,title:l,version:u,updates:p,argv:f,options:{}},arguments.length&&(c=h(r,e)))throw c;return s=this,Y.stdout.on("error",Y.exit),Y.stderr.on("error",Y.exit),ae(this,"args",v),ae(this,"flags",g),ae(this,"help",d),ae(this,"version",m),!0===r.title&&r.pkg?"object"==typeof r.pkg.bin&&null!==r.pkg.bin?(n=se(r.pkg.bin),Y.title=n[0]):r.pkg.name&&(Y.title=r.pkg.name):r.title&&(Y.title=r.title),r.updates&&r.pkg&&r.pkg.name&&r.pkg.version&&(r.pkg,re().notify()),!r.version&&r.pkg&&r.pkg.version&&(r.version=r.pkg.version),r.argv?r.argv=r.argv.slice(2):r.argv=Y.argv.slice(2),o=oe(r.argv,r.options),i=o._,delete o._,(t=o).help?this.help(0):t.version?this.version():this;function v(){return i.slice()}function g(){var e,n,r,o;for(e=se(t),n={},o=0;o<e.length;o++)n[r=e[o]]=t[r];return n}function d(e){ee.error(r.help),s.close(e||0)}function m(){ee.error(r.version),s.close()}}ae(le.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!c(e)||e<0)throw new TypeError(t("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));ne(Y,e)}else ne(Y,0)})),ae(le.prototype,"error",(function(e,n){var r;if(!(e instanceof Error))throw new TypeError(t("invalid argument. First argument must be an error object. Value: `%s`.",e));if(arguments.length>1){if("number"!=typeof n||!c(n)||n<0)throw new TypeError(t("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",n));r=n}else r=1;ee.error("Error: %s",e.message),ne(Y,r)})),ae(le.prototype,"exit",(function(e){if(0===arguments.length)return Y.exit(0);if("number"!=typeof e||!c(e)||e<0)throw new TypeError(t("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));Y.exit(e)}));var ue={};e(ue,"CLI",le);export{le as CLI,ue as default};
//# sourceMappingURL=index.mjs.map
