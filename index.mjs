// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@v0.2.2-esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-noop@v0.2.2-esm/index.mjs";function r(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})})),n}function i(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function s(e,t){return"constructor"===t&&"function"==typeof e[t]||"__proto__"===t}var a="",l=!0,u="",p=!0,c=null;function f(e){return Math.floor(e)===e}var v=Object.prototype.hasOwnProperty,g=Array.isArray;var h="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function d(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}var b=d,y=m;function w(e){if(b===setTimeout)return setTimeout(e,0);if((b===d||!b)&&setTimeout)return b=setTimeout,setTimeout(e,0);try{return b(e,0)}catch(t){try{return b.call(null,e,0)}catch(t){return b.call(this,e,0)}}}"function"==typeof h.setTimeout&&(b=setTimeout),"function"==typeof h.clearTimeout&&(y=clearTimeout);var k,j=[],T=!1,E=-1;function O(){T&&k&&(T=!1,k.length?j=k.concat(j):E=-1,j.length&&_())}function _(){if(!T){var e=w(O);T=!0;for(var t=j.length;t;){for(k=j,j=[];++E<t;)k&&k[E].run();E=-1,t=j.length}k=null,T=!1,function(e){if(y===clearTimeout)return clearTimeout(e);if((y===m||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(e);try{return y(e)}catch(t){try{return y.call(null,e)}catch(t){return y.call(this,e)}}}(e)}}function x(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];j.push(new A(e,t)),1!==j.length||T||w(_)}function A(e,t){this.fun=e,this.array=t}A.prototype.run=function(){this.fun.apply(null,this.array)};var N="browser",F="browser",L={},M=[],$={},B={},P={};function V(){}var z=V,D=V,S=V,C=V,I=V,Z=V,R=V;function W(e){throw new Error("process.binding is not supported")}function q(){return"/"}function G(e){throw new Error("process.chdir is not supported")}function H(){return 0}var J=h.performance||{},K=J.now||J.mozNow||J.msNow||J.oNow||J.webkitNow||function(){return(new Date).getTime()};function Q(e){var t=.001*K.call(J),n=Math.floor(t),o=Math.floor(t%1*1e9);return e&&(n-=e[0],(o-=e[1])<0&&(n--,o+=1e9)),[n,o]}var U=new Date;function X(){return(new Date-U)/1e3}var Y={nextTick:x,title:N,browser:true,env:L,argv:M,version:"",versions:$,on:z,addListener:D,once:S,off:C,removeListener:I,removeAllListeners:Z,emit:R,binding:W,cwd:q,chdir:G,umask:H,hrtime:Q,platform:F,release:B,config:P,uptime:X},ee=r(Object.freeze({__proto__:null,addListener:D,argv:M,binding:W,browser:true,chdir:G,config:P,cwd:q,default:Y,emit:R,env:L,hrtime:Q,nextTick:x,off:C,on:z,once:S,platform:F,release:B,removeAllListeners:Z,removeListener:I,title:N,umask:H,uptime:X,version:"",versions:$})),te=console,ne=ee.versions.node;function oe(e,t){var n;(n=ne.split("."))[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),n[0]>0||n[1]>10?e.exitCode=t:(e.exitCode=t,setTimeout((function(){e.exit(t)}),10))}function re(){return this instanceof re?this:new re}n(re.prototype,"notify",o);var ie=function(e,t){t||(t={});var n={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(n.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?n.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){n.bools[e]=!0}));var o={};function r(e){return o[e].some((function(e){return n.bools[e]}))}Object.keys(t.alias||{}).forEach((function(e){o[e]=[].concat(t.alias[e]),o[e].forEach((function(t){o[t]=[e].concat(o[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){n.strings[e]=!0,o[e]&&[].concat(o[e]).forEach((function(e){n.strings[e]=!0}))}));var a=t.default||{},l={_:[]};function u(e,t,o){for(var r=e,i=0;i<t.length-1;i++){var a=t[i];if(s(r,a))return;void 0===r[a]&&(r[a]={}),r[a]!==Object.prototype&&r[a]!==Number.prototype&&r[a]!==String.prototype||(r[a]={}),r[a]===Array.prototype&&(r[a]=[]),r=r[a]}var l=t[t.length-1];s(r,l)||(r!==Object.prototype&&r!==Number.prototype&&r!==String.prototype||(r={}),r===Array.prototype&&(r=[]),void 0===r[l]||n.bools[l]||"boolean"==typeof r[l]?r[l]=o:Array.isArray(r[l])?r[l].push(o):r[l]=[r[l],o])}function p(e,t,r){if(!r||!n.unknownFn||function(e,t){return n.allBools&&/^--[^=]+$/.test(t)||n.strings[e]||n.bools[e]||o[e]}(e,r)||!1!==n.unknownFn(r)){var s=!n.strings[e]&&i(t)?Number(t):t;u(l,e.split("."),s),(o[e]||[]).forEach((function(e){u(l,e.split("."),s)}))}}Object.keys(n.bools).forEach((function(e){p(e,void 0!==a[e]&&a[e])}));var c=[];-1!==e.indexOf("--")&&(c=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var f=0;f<e.length;f++){var v,g,h=e[f];if(/^--.+=/.test(h)){var d=h.match(/^--([^=]+)=([\s\S]*)$/);v=d[1];var m=d[2];n.bools[v]&&(m="false"!==m),p(v,m,h)}else if(/^--no-.+/.test(h))p(v=h.match(/^--no-(.+)/)[1],!1,h);else if(/^--.+/.test(h))v=h.match(/^--(.+)/)[1],void 0===(g=e[f+1])||/^(-|--)[^-]/.test(g)||n.bools[v]||n.allBools||o[v]&&r(v)?/^(true|false)$/.test(g)?(p(v,"true"===g,h),f+=1):p(v,!n.strings[v]||"",h):(p(v,g,h),f+=1);else if(/^-[^-]+/.test(h)){for(var b=h.slice(1,-1).split(""),y=!1,w=0;w<b.length;w++)if("-"!==(g=h.slice(w+2))){if(/[A-Za-z]/.test(b[w])&&"="===g[0]){p(b[w],g.slice(1),h),y=!0;break}if(/[A-Za-z]/.test(b[w])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(g)){p(b[w],g,h),y=!0;break}if(b[w+1]&&b[w+1].match(/\W/)){p(b[w],h.slice(w+2),h),y=!0;break}p(b[w],!n.strings[b[w]]||"",h)}else p(b[w],g,h);v=h.slice(-1)[0],y||"-"===v||(!e[f+1]||/^(-|--)[^-]/.test(e[f+1])||n.bools[v]||o[v]&&r(v)?e[f+1]&&/^(true|false)$/.test(e[f+1])?(p(v,"true"===e[f+1],h),f+=1):p(v,!n.strings[v]||"",h):(p(v,e[f+1],h),f+=1))}else if(n.unknownFn&&!1===n.unknownFn(h)||l._.push(n.strings._||!i(h)?h:Number(h)),t.stopEarly){l._.push.apply(l._,e.slice(f+1));break}}return Object.keys(a).forEach((function(e){var t,n,r;t=l,n=e.split("."),r=t,n.slice(0,-1).forEach((function(e){r=r[e]||{}})),n[n.length-1]in r||(u(l,e.split("."),a[e]),(o[e]||[]).forEach((function(t){u(l,t.split("."),a[e])})))})),t["--"]?l["--"]=c.slice():c.forEach((function(e){l._.push(e)})),l},se=Object.defineProperty,ae=Object.keys;function le(e,t,n){se(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}function ue(e){var n,o,r,i,s,f,h;if(!(this instanceof ue))return arguments.length?new ue(e):new ue;if(r={pkg:{},help:a,title:l,version:u,updates:p,argv:c,options:{}},arguments.length&&(h=function(e,n){return"object"!=typeof n||null===n||g(n)?new TypeError(t("invalid argument. Options argument must be an object. Value: `%s`.",n)):v.call(n,"pkg")&&(e.pkg=n.pkg,"object"!=typeof e.pkg||null===e.pkg||g(e.pkg))?new TypeError(t("invalid option. `%s` option must be an object. Option: `%s`.","pkg",e.pkg)):v.call(n,"help")&&(e.help=n.help,"string"!=typeof e.help)?new TypeError(t("invalid option. `%s` option must be a string. Option: `%s`.","help",e.help)):v.call(n,"version")&&(e.version=n.version,"string"!=typeof e.version)?new TypeError(t("invalid option. `%s` option must be a string. Option: `%s`.","version",e.version)):v.call(n,"title")&&(e.title=n.title,"string"!=typeof e.title&&"boolean"!=typeof e.title)?new TypeError(t("invalid option. `%s` option must be either a string or boolean primitive. Option: `%s`.","title",e.title)):v.call(n,"updates")&&(e.updates=n.updates,"boolean"!=typeof e.updates)?new TypeError(t("invalid option. `%s` option must be a boolean. Option: `%s`.","updates",e.updates)):v.call(n,"argv")&&(e.argv=n.argv,!g(e.argv))?new TypeError(t("invalid option. `%s` option must be an array. Option: `%s`.","argv",e.argv)):v.call(n,"options")&&(e.options=n.options,"object"!=typeof e.options||null===e.options||g(e.options))?new TypeError(t("invalid option. `%s` option must be a plain object. Option: `%s`.","options",e.options)):null}(r,e),h))throw h;return f=this,ee.stdout.on("error",ee.exit),ee.stderr.on("error",ee.exit),le(this,"args",(function(){return s.slice()})),le(this,"flags",(function(){var e,t,o,r;for(e=ae(n),t={},r=0;r<e.length;r++)t[o=e[r]]=n[o];return t})),le(this,"help",(function(e){te.error(r.help),f.close(e||0)})),le(this,"version",(function(){te.error(r.version),f.close()})),!0===r.title&&r.pkg?"object"==typeof r.pkg.bin&&null!==r.pkg.bin?(o=ae(r.pkg.bin),ee.title=o[0]):r.pkg.name&&(ee.title=r.pkg.name):r.title&&(ee.title=r.title),r.updates&&r.pkg&&r.pkg.name&&r.pkg.version&&(r.pkg,re().notify()),!r.version&&r.pkg&&r.pkg.version&&(r.version=r.pkg.version),r.argv?r.argv=r.argv.slice(2):r.argv=ee.argv.slice(2),i=ie(r.argv,r.options),s=i._,delete i._,(n=i).help?this.help(0):n.version?this.version():this}le(ue.prototype,"close",(function(e){if(0!==arguments.length){if("number"!=typeof e||!f(e)||e<0)throw new TypeError(t("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));oe(ee,e)}else oe(ee,0)})),le(ue.prototype,"error",(function(e,n){var o;if(!(e instanceof Error))throw new TypeError(t("invalid argument. First argument must be an error object. Value: `%s`.",e));if(arguments.length>1){if("number"!=typeof n||!f(n)||n<0)throw new TypeError(t("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",n));o=n}else o=1;te.error("Error: %s",e.message),oe(ee,o)})),le(ue.prototype,"exit",(function(e){if(0===arguments.length)return ee.exit(0);if("number"!=typeof e||!f(e)||e<0)throw new TypeError(t("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));ee.exit(e)}));var pe={};e(pe,"CLI",ue);export{ue as CLI,pe as default};
//# sourceMappingURL=index.mjs.map
